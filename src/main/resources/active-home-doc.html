<!--
  #%L
  Active Home :: Home
  $Id:$
  $HeadURL:$
  %%
  Copyright (C) 2016 Active Home Project
  %%
  This program is free software: you can redistribute it and/or modify
  it under the terms of the GNU General Public License as
  published by the Free Software Foundation, either version 3 of the 
  License, or (at your option) any later version.
  
  This program is distributed in the hope that it will be useful,
  but WITHOUT ANY WARRANTY; without even the implied warranty of
  MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
  GNU General Public License for more details.
  
  You should have received a copy of the GNU General Public 
  License along with this program.  If not, see
  <http://www.gnu.org/licenses/gpl-3.0.html>.
  #L%
  -->
<link rel="import" href="/bower_components/iron-icon/iron-icon.html">
<link rel="import" href="/bower_components/iron-icons/iron-icons.html">
<link rel="import" href="/bower_components/iron-icons/device-icons.html">
<link rel="import" href="/bower_components/iron-icons/editor-icons.html">
<link rel="import" href="/bower_components/iron-icons/maps-icons.html">
<link rel="import" href="/bower_components/iron-icons/image-icons.html">
<link rel="import" href="/bower_components/paper-button/paper-button.html">
<link rel="import" href="/bower_components/paper-icon-button/paper-icon-button.html">
<link rel="import" href="/bower_components/paper-header-panel/paper-header-panel.html">
<link rel="import" href="/bower_components/paper-toolbar/paper-toolbar.html">
<link rel="import" href="/bower_components/paper-icon-button/paper-icon-button.html">
<link rel="import" href="/bower_components/paper-card/paper-card.html">
<link rel="import" href="/bower_components/paper-drawer-panel/paper-drawer-panel.html">
<link rel="import" href="/bower_components/paper-item/paper-item.html">
<link rel="import" href="/bower_components/iron-ajax/iron-ajax.html">
<link rel="import" href="/bower_components/mark-down/mark-down.html">
<link rel="import" href="/${id}/loading-spinner.html">


<dom-module id="active-home-doc">

    <link rel="import" href="https://raw.githubusercontent.com/jackybourgeois/active-home/master/docs/branding/theme.css" type="css">

    <template>

        <style>
            .intro-section {
                width: 100%;
                margin: auto;
                padding: 2px;
                max-width: 1000px;
                text-align: center;
            }

            .bt-bottom {
                margin: 10px;
            }

            @media (max-width: 1000px) {
                section {
                    padding: 50px
                }
            }

            .content {
                background: linear-gradient(#598987, #11a39a);
            }

            .title {
                font-weight: bold;
            }

            .subtitle {
                font-style: italic;
            }

            paper-item {
                cursor: pointer;
            }

            .group {
                margin-top: 15px;
                font-style: italic;
                font-weight: bold;
            }

        </style>

        <iron-ajax id="ajax" handle-as="json" on-response="handleResponse"></iron-ajax>
        <loading-spinner id="spinner"></loading-spinner>

        <paper-drawer-panel>
            <paper-header-panel drawer>
                <div>
                    <a href="/" style="text-decoration: none">
                        <img src="https://raw.github.com/jackybourgeois/active-home/master/docs/branding/favicon-96x96.png"
                             style="margin: 2px;float: left">
                        <h1>Active Home</h1>
                    </a>
                </div>
                <div>
                    <paper-item id="--activehome--master--org__activehome__com--docs--com__md-item" on-click="selectSection">
                        <paper-item-body two-line id="--activehome--master--org__activehome__com--docs--com__md-body">
                            <div class="title" id="--activehome--master--org__activehome__com--docs--com__md-title">
                                <iron-icon icon="language" id="--activehome--master--org__activehome__com--docs--com__md-icon"></iron-icon>
                                Com
                            </div>
                            <div secondary class="subtitle" id="--activehome--master--org__activehome__com--docs--com__md-subtitle">
                                Messages in Active Home
                            </div>
                        </paper-item-body>
                    </paper-item>
                    <paper-item id="--activehome--master--org__activehome__time--docs--timeControlled__md-item"
                                on-click="selectSection">
                        <paper-item-body two-line id="--activehome--master--org__activehome__time--docs--timeControlled__md-body">
                            <div class="title" id="--activehome--master--org__activehome__time--docs--timeControlled__md-title">
                                <iron-icon icon="device:access-time" id="--activehome--master--org__activehome__time--docs--timeControlled__md-icon"></iron-icon>
                                Time
                            </div>
                            <div secondary class="subtitle" id="--activehome--master--org__activehome__time--docs--timeControlled__md-subtitle">
                                Tic, distribution, simulation
                            </div>
                        </paper-item-body>
                    </paper-item>
                    <paper-item on-click="selectSection" id="--activehome--master--org__activehome__service--docs--service__md-item"
                                style="background: #ffe680">
                        <paper-item-body two-line id="--activehome--master--org__activehome__service--docs--service__md-body">
                            <div class="title" id="--activehome--master--org__activehome__service--docs--service__md-title">
                                <iron-icon icon="trending-up" id="--activehome--master--org__activehome__service--docs--service__md-icon"></iron-icon>
                                Service
                            </div>
                            <div secondary class="subtitle" id="--activehome--master--org__activehome__service--docs--service__md-subtitle">
                                Play with data
                            </div>
                        </paper-item-body>
                    </paper-item>
                    <paper-item id="--activehome--master--org__activehome__api--docs--api__md-item"
                                on-click="selectSection" style="background: #afdde9">
                        <paper-item-body two-line id="--activehome--master--org__activehome__api--docs--api__md-body">
                            <div class="title" id="--activehome--master--org__activehome__api--docs--api__md-title">
                                <iron-icon icon="swap-horiz" id="--activehome--master--org__activehome__api--docs--api__md-icon"></iron-icon>
                                API
                            </div>
                            <div secondary class="subtitle" id="--activehome--master--org__activehome__api--docs--api__md-subtitle">
                                Get in and out Active Home
                            </div>
                        </paper-item-body>
                    </paper-item>
                    <paper-item id="--activehome--master--org__activehome__io--docs--io__md-item"
                                on-click="selectSection" style="background: #d38d5f">
                        <paper-item-body two-line id="--activehome--master--org__activehome__io--docs--io__md-body">
                            <div class="title" id="--activehome--master--org__activehome__io--docs--io__md-title">
                                <iron-icon icon="maps:local-laundry-service" id="--activehome--master--org__activehome__io--docs--io__md-body"></iron-icon>
                                IO
                            </div>
                            <div secondary class="subtitle" id="--activehome--master--org__activehome__io--docs--io__md-subtite">
                                Input/Output
                            </div>
                        </paper-item-body>
                    </paper-item>
                    <paper-item id="--activehome--master--org__activehome__user--docs--user__md-item"
                                on-click="selectSection" style="background: #aaffaa">
                        <paper-item-body two-line id="--activehome--master--org__activehome__user--docs--user__md-body">
                            <div class="title" id="--activehome--master--org__activehome__user--docs--user__md-title">
                                <iron-icon icon="face" id="--activehome--master--org__activehome__user--docs--user__md-user"></iron-icon>
                                User
                            </div>
                            <div secondary class="subtitle" id="--activehome--master--org__activehome__user--docs--user__md-subtitle">
                                Householder/System Hub
                            </div>
                        </paper-item-body>
                    </paper-item>
                    <paper-item id="--activehome--master--org__activehome__context--docs--context__md-item"
                                on-click="selectSection">
                        <paper-item-body two-line id="--activehome--master--org__activehome__context--docs--context__md-body" >
                            <div class="title" id="--activehome--master--org__activehome__context--docs--context__md-title" >
                                <iron-icon icon="device:storage" id="--activehome--master--org__activehome__context--docs--context__md-icon"></iron-icon>
                                Context
                            </div>
                            <div secondary class="subtitle" id="--activehome--master--org__activehome__context--docs--context__md-subtitle" >
                                Managing data
                            </div>
                        </paper-item-body>
                    </paper-item>
                    <div class="group">
                        Energy
                    </div>
                    <hr>
                    <paper-item id="--activehome-energy--master--docs--reactive__md-item" on-click="selectSection">
                        <paper-item-body two-line id="--activehome-energy--master--docs--reactive__md-body">
                            <div class="title" id="--activehome-energy--master--docs--reactive__md-title">
                                Reactive Process
                            </div>
                            <div secondary class="subtitle" id="--activehome-energy--master--docs--reactive__md-subtitle"></div>
                        </paper-item-body>
                    </paper-item>
                    <paper-item id="--activehome-energy--master--docs--predictive__md-item"
                                on-click="selectSection">
                        <paper-item-body two-line id="--activehome-energy--master--docs--predictive__md-body">
                            <div class="title" id="--activehome-energy--master--docs--predictive__md-title">
                                Predictive Process
                            </div>
                            <div secondary class="subtitle" id="--activehome-energy--master--docs--predictive__md-subtitle">

                            </div>
                        </paper-item-body>
                    </paper-item>
                    <paper-item id="--activehome-energy--master--docs--collaboration__md-item"
                                on-click="selectSection">
                        <paper-item-body two-line id="--activehome-energy--master--docs--collaboration__md-body">
                            <div class="title" id="--activehome-energy--master--docs--collaboration__md-title">
                                Collaboration
                            </div>
                            <div secondary class="subtitle" id="--activehome-energy--master--docs--collaboration__md-subtitle">

                            </div>
                        </paper-item-body>
                    </paper-item>

                    <a href="/store">
                        <paper-button class="info bt-bottom" unresolved="" raised>
                            <iron-icon icon="apps"></iron-icon>
                            Component Catalog
                        </paper-button>
                    </a>
                </div>
            </paper-header-panel>
            <paper-header-panel main class="content" mode="waterfall-tall">
                <paper-toolbar>
                    <paper-icon-button icon="menu" paper-drawer-toggle></paper-icon-button>
                    <div class="bottom">
                        <h2 style="color: #fff">Reference Guide</h2>
                    </div>
                </paper-toolbar>
                <section style="text-align: center">
                    <paper-card id="mainPanel" style="margin: auto; width: 100%;
                    min-height: 500px; max-width: 800px; padding: 50px">

                    </paper-card>
                </section>
            </paper-header-panel>
        </paper-drawer-panel>

    </template>

    <script>
        Polymer({
            is: 'active-home-doc',

            ready: function () {
                this.requestDocPage("--activehome--master--docs--overview__md");
            },

            loadView: function (content) {
                this.$.mainPanel.innerHTML = "<div class=\"card-content\" style=\"text-align: left\">" +
                        "<mark-down>" + content + "</mark-down></div>";
                this.$.spinner.hide();
            },

            selectSection: function (e) {
                var target = e.srcElement;
                if (target==undefined) {
                    target = e.target;
                }
                this.requestDocPage(target.id.substr(0,target.id.lastIndexOf("-")));
            },

            requestDocPage: function(page) {
                var ajax = this.$.ajax;
                ajax.method = "GET";
                ajax.url = "/store/doc/" + encodeURIComponent(page);
                ajax.generateRequest();
                this.$.spinner.display();
            },

            handleResponse: function (e) {
                this.loadView(e.detail.response);
            }
        });
    </script>
</dom-module>